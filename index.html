<!DOCTYPE html>
<html>
<head>
    <title>The JoeApp - Mood Tracker (Firebase)</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <style>
        body { font-family: sans-serif; max-width: 400px; margin: 40px auto; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        input, textarea, button { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        button { background-color: #f7a01a; color: white; cursor: pointer; }
    </style>
</head>
<body>
    <h1>JoeApp: Mood Log</h1>
    <form id="moodForm">
        <label for="mood_score">Mood (1-10):</label>
        <input type="number" id="mood_score" min="1" max="10" required>
        
        <label for="notes">Notes:</label>
        <textarea id="notes"></textarea>
        
        <label for="tags">Tags:</label>
        <input type="text" id="tags">
        
        <button type="submit">Log It!</button>
    </form>
    <p id="feedback"></p>

    <script>
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-analytics.js";
          // Your web app's Firebase configuration
          // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
      apiKey: "AIzaSyDeoZvj5eRsvWxyuow-j72byoo52197c5Y",
      authDomain: "joeapp-v1.firebaseapp.com",
      projectId: "joeapp-v1",
      storageBucket: "joeapp-v1.firebasestorage.app",
      messagingSenderId: "973294244660",
      appId: "1:973294244660:web:1a8c2302428992bf02cb61",
      measurementId: "G-5QE4C2DCJX"
      };
      
        //// *** REPLACE THIS ENTIRE OBJECT WITH YOUR FIREBASE CONFIG FROM STEP 3 ***
        //const firebaseConfig = {
          //// Your actual apiKey, authDomain, projectId, etc. goes here
        //};
        // *******************************************************************
        
        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const analytics = getAnalytics(app);

        const form = document.getElementById('moodForm');
        const feedback = document.getElementById('feedback');

        form.addEventListener('submit', async function(e) {
            e.preventDefault();
            feedback.textContent = "Logging data...";

            try {
                // Add a new document to the 'moods' collection
                await db.collection("moods").add({
                    mood_score: parseInt(form.mood_score.value),
                    notes: form.notes.value,
                    tags: form.tags.value,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp() // Use server time
                });

                feedback.textContent = `Mood logged successfully!`;
                form.reset();
            } catch (e) {
                feedback.textContent = "Error logging mood: " + e.message;
            }
        });
    </script>
</body>
</html>
